<!doctype html><html lang=zh><head><title>RESTful API 文章解读 :: 贾德尔的笔记本</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="详细解读 RESTful API 的设计原则、接口规范、版本管理和最佳实践，帮助开发者理解和实现高效的前后端通信。"><meta name=keywords content="RESTful API,API设计,接口规范,前后端通信,API版本管理"><meta name=robots content="noodp"><link rel=canonical href=/posts/develop/rules/restful-api/><link rel=stylesheet href=/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=/style.css><link rel="shortcut icon" href=/favicon.png><link rel=apple-touch-icon href=/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="RESTful API 文章解读"><meta property="og:description" content="详细解读 RESTful API 的设计原则、接口规范、版本管理和最佳实践，帮助开发者理解和实现高效的前后端通信。"><meta property="og:url" content="/posts/develop/rules/restful-api/"><meta property="og:site_name" content="贾德尔的笔记本"><meta property="og:image" content="/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2021-07-03 01:35:35 +0000 UTC"><script async src="https://www.googletagmanager.com/gtag/js?id=G-37WBKLJYQL"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37WBKLJYQL")</script></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/zh/><div class=logo>贾德尔</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/posts/>帖子</a></li><li><a href=/tags/>标签</a></li><li><a href=/about/>关于我</a></li><li><a href>RSS</a></li><hr><li><a href=/>中文</a></li><li><a href=/ja/>日本語</a></li><li><a href=/en/>English</a></li></ul></li></ul><ul class="menu menu--desktop menu--language-selector"><li class=menu__trigger>中文&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>中文</a></li><li><a href=/ja/>日本語</a></li><li><a href=/en/>English</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/posts/>帖子</a></li><li><a href=/tags/>标签</a></li><li><a href=/about/>关于我</a></li><li><a href>RSS</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=/posts/develop/rules/restful-api/>RESTful API 文章解读</a></h1><div class=post-meta><time class=post-date>2021-07-03 1:35:21 AM</time><span class=post-reading-time>1 min read (197 words)</span></div><span class=post-tags>#<a href=/tags/developer/>developer</a>&nbsp;</span><div class=post-content><div><h4 id=restful-api-设计指南-出处httpwwwruanyifengcomblog201405restful_apihtml>RESTful API 设计指南 <a href=http://www.ruanyifeng.com/blog/2014/05/restful_api.html><em><strong>出处</strong></em></a><a href=#restful-api-设计指南-出处httpwwwruanyifengcomblog201405restful_apihtml class=hanchor arialabel=Anchor>#</a></h4><h5 id=作者-阮一峰httpwwwruanyifengcom>作者： <a href=http://www.ruanyifeng.com>阮一峰</a><a href=#作者-阮一峰httpwwwruanyifengcom class=hanchor arialabel=Anchor>#</a></h5><h5 id=日期-2014年5月22日>日期： 2014年5月22日<a href=#日期-2014年5月22日 class=hanchor arialabel=Anchor>#</a></h5><p>网络应用程序，分为前端和后端两个部分。当前的发展趋势，就是前端设备层出不穷（手机、平板、桌面电脑、其他专用设备&mldr;&mldr;）。</p><p>因此，必须有一种统一的机制，方便不同的前端设备与后端进行通信。这导致API构架的流行，甚至出现"API First"的设计思想。RESTful
API是目前比较成熟的一套互联网应用程序的API设计理论。我以前写过一篇《理解RESTful架构》，探讨如何理解这个概念。</p><p>今天，我将介绍RESTful API的设计细节，探讨如何设计一套合理、好用的API。我的主要参考了两篇文章（1，2）。</p><h4 id=restful-api>RESTful API<a href=#restful-api class=hanchor arialabel=Anchor>#</a></h4><h5 id=一协议-api与用户的通信协议总是使用https协议>一、协议 API与用户的通信协议，总是使用HTTPs协议。<a href=#一协议-api与用户的通信协议总是使用https协议 class=hanchor arialabel=Anchor>#</a></h5><h5 id=二域名-应该尽量将api部署在专用域名之下>二、域名 应该尽量将API部署在专用域名之下。<a href=#二域名-应该尽量将api部署在专用域名之下 class=hanchor arialabel=Anchor>#</a></h5><p><code>https://api.example.com</code>
如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下。</p><p><code>https://example.org/api/</code></p><h5 id=三版本versioning-应该将api的版本号放入url>三、版本（Versioning） 应该将API的版本号放入URL。<a href=#三版本versioning-应该将api的版本号放入url class=hanchor arialabel=Anchor>#</a></h5><p><code>https://api.example.com/v1/</code>
另一种做法是，将版本号放在HTTP头信息中，但不如放入URL方便和直观。Github采用这种做法。</p><h5 id=四路径endpoint-路径又称终点endpoint表示api的具体网址>四、路径（Endpoint） 路径又称"终点"（endpoint），表示API的具体网址。<a href=#四路径endpoint-路径又称终点endpoint表示api的具体网址 class=hanchor arialabel=Anchor>#</a></h5><p>在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的"集合"
（collection），所以API中的名词也应该使用复数。</p><p>举例来说，有一个API提供动物园（zoo）的信息，还包括各种动物和雇员的信息，则它的路径应该设计成下面这样。</p><p><code>https://api.example.com/v1/zoos</code>
<code>https://api.example.com/v1/animals</code>
<code>https://api.example.com/v1/employees</code></p><h5 id=五http动词-对于资源的具体操作类型由http词表示>五、HTTP动词 对于资源的具体操作类型，由HTTP词表示。<a href=#五http动词-对于资源的具体操作类型由http词表示 class=hanchor arialabel=Anchor>#</a></h5><p>常用的HTTP动词有下面五个（括号里是对应的SQL命令）。</p><blockquote><p>GET（SELECT）：从服务器取出资源（一项或多项）。<br>POST（CREATE）：在服务器新建一个资源。<br>PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。<br>PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。<br>DELETE（DELETE）：从服务器删除资源。 还有两个不常用的HTTP动词。<br>HEAD：获取资源的元数据。<br>OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。 下面是一些例子。</p></blockquote><blockquote><p>GET /zoos：列出所有动物园<br>POST /zoos：新建一个动物园<br>GET /zoos/ID：获取某个指定动物园的信息<br>PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）<br>PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）<br>DELETE /zoos/ID：删除某个动物园<br>GET /zoos/ID/animals：列出某个指定动物园的所有动物<br>DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</p></blockquote><h5 id=六过滤信息filtering-如果记录数量很多服务器不可能都将它们返回给用户api应该提供参数过滤返回结果>六、过滤信息（Filtering） 如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果。<a href=#六过滤信息filtering-如果记录数量很多服务器不可能都将它们返回给用户api应该提供参数过滤返回结果 class=hanchor arialabel=Anchor>#</a></h5><p>下面是一些常见的参数。</p><blockquote><p>?limit=10：指定返回记录的数量<br>?offset=10：指定返回记录的开始位置。<br>?page=2&amp;per_page=100：指定第几页，以及每页的记录数。<br>?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。<br>?animal_type_id=1：指定筛选条件 参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，GET
/zoo/ID/animals 与 GET /animals?zoo_id=ID 的含义是相同的。</p></blockquote><h5 id=七状态码status-codes-服务器向用户返回的状态码和提示信息常见的有以下一些方括号中是该状态码对应的http动词>七、状态码（Status Codes） 服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的HTTP动词）。<a href=#七状态码status-codes-服务器向用户返回的状态码和提示信息常见的有以下一些方括号中是该状态码对应的http动词 class=hanchor arialabel=Anchor>#</a></h5><blockquote><p>200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。<br>201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。<br>202 Accepted - [<em>]：表示一个请求已经进入后台排队（异步任务）<br>204 NO CONTENT - [DELETE]：用户删除数据成功。<br>400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。
401 Unauthorized - [</em>]：表示用户没有权限（令牌、用户名、密码错误）。<br>403 Forbidden - [<em>]表示用户得到授权（与401错误相对），但是访问是被禁止的。<br>404 NOT FOUND - [</em>]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。<br>406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。<br>410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。<br>422 Unprocesable entity - [POST/PUT/PATCH]：当创建一个对象时，发生一个验证错误。<br>500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。 状态码的完全列表参见这里。</p></blockquote><h5 id=八错误处理error-handling-如果状态码是4xx就应该向用户返回出错信息一般来说返回的信息中将error作为键名出错信息作为键值即可>八、错误处理（Error handling） 如果状态码是4xx，就应该向用户返回出错信息。一般来说，返回的信息中将error作为键名，出错信息作为键值即可。<a href=#八错误处理error-handling-如果状态码是4xx就应该向用户返回出错信息一般来说返回的信息中将error作为键名出错信息作为键值即可 class=hanchor arialabel=Anchor>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>error:</span> <span class=nt>&#34;Invalid API key&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></div><h5 id=九返回结果-针对不同操作服务器向用户返回的结果应该符合以下规范>九、返回结果 针对不同操作，服务器向用户返回的结果应该符合以下规范。<a href=#九返回结果-针对不同操作服务器向用户返回的结果应该符合以下规范 class=hanchor arialabel=Anchor>#</a></h5><blockquote><p>GET /collection：返回资源对象的列表（数组）<br>GET /collection/resource：返回单个资源对象<br>POST /collection：返回新生成的资源对象<br>PUT /collection/resource：返回完整的资源对象<br>PATCH /collection/resource：返回完整的资源对象<br>DELETE /collection/resource：返回一个空文档</p></blockquote><h5 id=十hypermedia-api>十、Hypermedia API<a href=#十hypermedia-api class=hanchor arialabel=Anchor>#</a></h5><p>RESTful API最好做到<code>Hypermedia</code>，即返回结果中提供链接，连向其他API方法，使得用户不查文档，也知道下一步应该做什么。</p><p>比如，当用户向api.example.com的根目录发出请求，会得到这样一个文档。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;link&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rel&#34;</span><span class=p>:</span> <span class=s2>&#34;collection https://www.example.com/zoos&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;https://api.example.com/zoos&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;List of zoos&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;application/vnd.yourformat+json&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上面代码表示，文档中有一个link属性，用户读取这个属性就知道下一步该调用什么API了。rel表示这个API与当前网址的关系（collection关系，并给出该collection的网址），href表示API的路径，title表示API的标题，type表示返回类型。</p><p><code>Hypermedia</code> API的设计被称为HATEOAS。Github的API就是这种设计，访问api.github.com会得到一个所有可用API的网址列表。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;current_user_url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://api.github.com/user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;authorizations_url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://api.github.com/authorizations&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>从上面可以看到，如果想获取当前用户的信息，应该去访问api.github.com/user，然后就得到了下面结果。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Requires authentication&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;documentation_url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://developer.github.com/v3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上面代码表示，服务器给出了提示信息，以及文档的网址。</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>阅读其他文章</span><hr></div><div class=pagination__buttons><a href=/posts/devops/linux/docker-mysql-backup/ class="button inline prev">&lt; [<span class=button__text>docker mysql 数据备份脚本shell（基于crontab）</span>]
</a>::
<a href=/posts/develop/rules/driven-patterns/ class="button inline next">[<span class=button__text>驱动模式</span>] ></a></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>